{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      stages: [\"ToDo\", \"Doing\", \"Done\"],\n      tasks: [\"\"],\n      title: \"\",\n      description: \"\",\n      stage: \"ToDo\",\n      localTimer: 0,\n      count: false,\n      addTask: false\n    };\n  },\n\n  mounted() {\n    setInterval(() => {\n      this.getData();\n      this.localTimer += 1;\n\n      for (let task in this.tasks) {\n        console.log(this.tasks[task].timerState);\n\n        if (this.tasks[task].timerState) {\n          this.toggleTimer(this.tasks[task], 1, false);\n        }\n      }\n    }, 1000);\n  },\n\n  methods: {\n    convertTime(seconds) {\n      try {\n        let time = new Date(seconds * 1000).toISOString().substr(11, 8);\n        return time;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    async getData() {\n      try {\n        const datetime = new Date();\n        let date = datetime.getFullYear() + \"-\" + (datetime.getMonth() + 1) + \"-\" + datetime.getDate();\n        const response = await axios.get(`http://${location.hostname}:8000/api/taskss/?format=json&created_at=${date}`);\n        this.tasks = response.data;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    toggle() {\n      this.count = !this.count;\n    },\n\n    async toggleTimer(task, x, toglge) {\n      try {\n        this.count = !this.count;\n        this.switch = task.timerState;\n\n        if (toggle) {\n          this.switch = !this.switch;\n        }\n\n        const response = await axios.put(`http://${location.hostname}:8000/api/taskss/${task.id}/?format=json`, {\n          stage: task.stageToggle,\n          title: task.title,\n          description: task.description,\n          timer: task.timer + x,\n          timerState: this.switch\n        });\n        this.localTimer = 0;\n        let taskIndex = this.tasks.findIndex(t => t.id === task.id);\n        this.tasks = this.tasks.map(task => {\n          if (this.tasks.findIndex(t => t.id === task.id) === taskIndex) {\n            return response.data;\n          }\n\n          return task;\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    async toggleStage(task, stageToggle) {\n      try {\n        const response = await axios.put(`http://${location.hostname}:8000/api/taskss/${task.id}/?format=json`, {\n          stage: stageToggle,\n          title: task.title,\n          description: task.description\n        });\n        let taskIndex = this.tasks.findIndex(t => t.id === task.id);\n        this.tasks = this.tasks.map(task => {\n          if (this.tasks.findIndex(t => t.id === task.id) === taskIndex) {\n            return response.data;\n          }\n\n          return task;\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    async submitForm() {\n      try {\n        const response = await axios.post(`http://${location.hostname}:8000/api/taskss/?format=json`, {\n          title: this.title,\n          description: this.description,\n          stage: this.stage\n        });\n        this.tasks.push(response.data);\n        this.title = '';\n        this.description = '';\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    async deleteTask(task) {\n      let confirmation = confirm(\"Are you sure?\");\n\n      if (confirmation) {\n        try {\n          await axios.delete(`http://${location.hostname}:8000/api/taskss/${task.id}/?format=json`);\n          this.getData();\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    }\n\n  },\n\n  beforeMount() {\n    document.querySelector('body').setAttribute('style', 'background-image:url(\"tourqoise.jpeg\")');\n  },\n\n  beforeUnmout() {\n    document.querySelector('body').setAttribute('style', '');\n  },\n\n  created() {\n    this.getData();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["axios","data","stages","tasks","title","description","stage","localTimer","count","addTask","mounted","setInterval","getData","task","console","log","timerState","toggleTimer","methods","convertTime","seconds","time","Date","toISOString","substr","error","datetime","date","getFullYear","getMonth","getDate","response","get","location","hostname","toggle","x","toglge","switch","put","id","stageToggle","timer","taskIndex","findIndex","t","map","toggleStage","submitForm","post","push","deleteTask","confirmation","confirm","delete","beforeMount","document","querySelector","setAttribute","beforeUnmout","created"],"sourceRoot":"","sources":["/home/andrei/djangoWorkspace/APITest/client/django_task_client/src/components/MyTasks.vue"],"sourcesContent":["<template>\n  <div class=\"task_container\">\n    <b-button pill variant=\"dark\" @click=\"this.addTask=!this.addTask\" class=\"addBtn\"> {{addTask ? \"Cancel\":\"Add New Task\"}}</b-button>\n    <div v-if=\"addTask\" class=\"add_task\">\n      <form v-on:submit.prevent=\"submitForm\">\n        <div class=\"form-group\">\n          <label for=\"title\" >Title</label>\n          <input type=\"text\" class=\"form-control\" id=\"title\" v-model=\"title\" />\n        </div>\n        <div class=\"form-group\">\n          <label for=\"description\">Description</label>\n          <textarea\n            class=\"form-control\"\n            id=\"description\"\n            v-model=\"description\"\n          ></textarea>\n        </div>\n        <div class=\"form-group\">\n          <b-button pill variant=\"outline-light\" type=\"submit\">Add Task</b-button>\n        </div>\n      </form>\n    </div>\n    <div class=\"task_content\">\n      <div v-for=\"stage in stages\" :key=\"stage\">\n      <div  class=\"tasks_list\">\n        <p class=\"stage\">{{stage}}</p>\n        <div v-for=\"task in tasks\" :key=\"task.id\">\n          <div v-if=\"task.stage == stage\" v-bind:class=\"stage\">\n          <h2>{{ task.title }}</h2>\n          <p>{{ task.description }}</p>\n          <p v-if=\"task.timerState\" >Now:{{ convertTime(localTimer) }}</p>\n          <p >Total:{{ convertTime(task.timer) }}</p>\n          <b-button pill variant=\"info\" v-if=\"task.stage=='Doing'\" @click=\"toggleTimer(task, 0,true)\">\n            {{ task.timerState?\"Stop\":\"Start\" }}\n          </b-button>\n          <b-button v-if=\"task.stage!='ToDo'\" pill variant=\"outline-danger\" @click=\"toggleStage(task, 'ToDo')\">\n            To Do\n          </b-button>\n          <b-button v-if=\"task.stage!='Doing'\" pill variant=\"outline-warning\" @click=\"toggleStage(task, 'Doing')\">\n            Doing\n          </b-button>\n          <b-button v-if=\"task.stage!='Done'\" pill variant=\"outline-success\" @click=\"toggleStage(task,'Done')\">\n            Done\n          </b-button>\n          <b-button pill variant=\"dark\" @click=\"deleteTask(task)\">Delete</b-button>\n          </div>\n        </div>\n      </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      stages: [\"ToDo\", \"Doing\", \"Done\"],\n      tasks: [\"\"],\n      title: \"\",\n      description: \"\",\n      stage: \"ToDo\",\n      localTimer: 0,\n      count: false,\n      addTask: false\n    };\n  },\nmounted () {\n    setInterval(() => {\n      this.getData();\n      this.localTimer += 1;\n        for(let task in this.tasks){\n          console.log(this.tasks[task].timerState);\n          if(this.tasks[task].timerState){\n            this.toggleTimer(this.tasks[task],1,false);\n          }\n        \n      }\n    }, 1000)\n  },\n  methods: {\n\n     convertTime(seconds){\n      try{\n        let time = new Date(seconds * 1000).toISOString().substr(11, 8);\n        return time;\n      }\n      catch(error) {\n        console.log(error);\n      }\n    },\n\n    async getData() {\n      try {\n        const datetime = new Date();\n        let date = datetime.getFullYear()+\"-\"+(datetime.getMonth()+1)+\"-\"+datetime.getDate();\n        const response = await axios.get(\n          `http://${location.hostname}:8000/api/taskss/?format=json&created_at=${date}`\n        );\n        this.tasks = response.data;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    toggle(){\n      this.count=!this.count;\n    },\n\n    async toggleTimer(task, x, toglge){\n      try{\n        this.count=!this.count;\n        this.switch = task.timerState;\n        if(toggle){\n          this.switch=!this.switch;\n        }\n          const response = await axios.put(\n          `http://${location.hostname}:8000/api/taskss/${task.id}/?format=json`,\n          {\n            stage: task.stageToggle,\n            title: task.title,\n            description: task.description,\n            timer: task.timer+x,\n            timerState: this.switch,\n\n          });\n          this.localTimer = 0;\n          let taskIndex = this.tasks.findIndex((t) => t.id === task.id);\n\n        this.tasks = this.tasks.map((task) => {\n          if (this.tasks.findIndex((t) => t.id === task.id) === taskIndex) {\n            return response.data;\n          }\n          return task;\n          \n        });\n        }\n        catch (error) {\n        console.log(error);\n    }},\n    async toggleStage(task, stageToggle) {\n      try {\n        const response = await axios.put(\n          `http://${location.hostname}:8000/api/taskss/${task.id}/?format=json`,\n          {\n            stage: stageToggle,\n            title: task.title,\n            description: task.description\n          }\n        );\n\n        let taskIndex = this.tasks.findIndex((t) => t.id === task.id);\n\n        this.tasks = this.tasks.map((task) => {\n          if (this.tasks.findIndex((t) => t.id === task.id) === taskIndex) {\n            return response.data;\n          }\n          return task;\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\tasync submitForm(){\n\t\ttry{\n\t\t\tconst response = await axios.post(\n\t\t\t`http://${location.hostname}:8000/api/taskss/?format=json`,\n\t\t\t{\n\t\t\t\ttitle: this.title,\n\t\t\t\tdescription: this.description,\n\t\t\t\tstage: this.stage\n\t\t\t}\n\t\t\t);\n\t\t\tthis.tasks.push(response.data);\n\t\t\tthis.title = '';\n\t\t\tthis.description  = '';\n\t\t}\n\t\tcatch(error){\n\t\t\tconsole.log(error);\n\t\t}\n\t}, async deleteTask(task){\n    let confirmation = confirm(\"Are you sure?\");\n    if(confirmation){\n\t\t\ttry{\n\t\t\t\tawait axios.delete(`http://${location.hostname}:8000/api/taskss/${task.id}/?format=json`);\n\t\t\t\tthis.getData();\n\t\t\t}\n\t\t\tcatch(error){\n\t\t\t\tconsole.log(error);\n\t\t\t}\n    }\n\t}\n  },\n  beforeMount () {\n   document.querySelector('body').setAttribute('style', 'background-image:url(\"tourqoise.jpeg\")')\n  },\n  beforeUnmout () {\n    document.querySelector('body').setAttribute('style', '')\n  },\n  created() {\n    this.getData();\n  },\n};\n</script>\n\n<style scoped>\n\n.stage{\n  display: none;\n  position: relative;\n  color: White;\n  font-weight: bold;\n  background-color: rgba(116, 255, 243, 0.623);\n  margin: 0px;\n  border-radius: 20px;\n  width: 200px;\n  height: 30px;\n  margin-left: 50px;\n  padding-top: 5px;\n}\n\nbutton{\n  margin: 1px;\n  margin-bottom: 5px;\n}\n\nform{\n  \n  position: relative;\n  left: 50%;\n  transform: translate(-50%);\n  margin-bottom: 10px;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  background-color: rgba(44, 44, 44, 0.63);\n  width: 500px;\n  border-radius: 15px;\n  color: white;\n\n}\n.title{\n  position: absolute;\n  top: 0px;\n}\n.task_content{\n  position: absolute;\n  display: flex;\n  flex-wrap: wrap;\n  left: 50%;\n  margin-top: 30px;\n  transform: translate(-50%);\n}\n\n.tasks_list {\n  background-color: rgba(0, 0, 0, 0.199);\n  padding: 5px;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  padding-right: 25px;\n  margin: 5px;\n  border-radius: 40px;\n}\n.tasks_list > div > div{\n  position: relative;\n  list-style: none;\n  width: 250px;\n  height: 200px;\n  border-radius: 25px;\n  padding: 10px;\n  padding-bottom: 20px;\n background-color: rgba(116, 255, 243, 0.623); \n  margin-left: 20px;\n}\n\n@media(max-width : 520px){\n  .task_content{\n  position: absolute;\n  display: flex;\n  left: 100%;\n  transform: translate(-50%);\n}\n\n  .addBtn{\n    position:fixed;\n    left:125px;\n    top:30px;\n\n  }\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}